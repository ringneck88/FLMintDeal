{"version":3,"file":"error.mjs","sources":["../../../../../server/src/services/internals/types/error.ts"],"sourcesContent":["import { objectType } from 'nexus';\nimport { get } from 'lodash/fp';\nimport { errors } from '@strapi/utils';\n\nimport type { Context } from '../../types';\n\nconst { ValidationError } = errors;\n\n/**\n * Build an Error object type\n * @return {Object<string, NexusObjectTypeDef>}\n */\nexport default ({ strapi }: Context) => {\n  const { ERROR_CODES, ERROR_TYPE_NAME } = strapi.plugin('graphql').service('constants');\n\n  return objectType({\n    name: ERROR_TYPE_NAME,\n\n    definition(t) {\n      t.nonNull.string('code', {\n        resolve(parent) {\n          const code = get('code', parent);\n\n          const isValidPlaceholderCode = Object.values(ERROR_CODES).includes(code);\n          if (!isValidPlaceholderCode) {\n            throw new ValidationError(`\"${code}\" is not a valid code value`);\n          }\n\n          return code;\n        },\n      });\n\n      t.string('message');\n    },\n  });\n};\n"],"names":["ValidationError","errors","strapi","ERROR_CODES","ERROR_TYPE_NAME","plugin","service","objectType","name","definition","t","nonNull","string","resolve","parent","code","get","isValidPlaceholderCode","Object","values","includes"],"mappings":";;;;AAMA,MAAM,EAAEA,eAAe,EAAE,GAAGC,MAAAA;AAE5B;;;AAGC,IACD,YAAe,CAAA,CAAC,EAAEC,MAAM,EAAW,GAAA;IACjC,MAAM,EAAEC,WAAW,EAAEC,eAAe,EAAE,GAAGF,MAAAA,CAAOG,MAAM,CAAC,SAAWC,CAAAA,CAAAA,OAAO,CAAC,WAAA,CAAA;AAE1E,IAAA,OAAOC,UAAW,CAAA;QAChBC,IAAMJ,EAAAA,eAAAA;AAENK,QAAAA,UAAAA,CAAAA,CAAWC,CAAC,EAAA;AACVA,YAAAA,CAAAA,CAAEC,OAAO,CAACC,MAAM,CAAC,MAAQ,EAAA;AACvBC,gBAAAA,OAAAA,CAAAA,CAAQC,MAAM,EAAA;oBACZ,MAAMC,IAAAA,GAAOC,IAAI,MAAQF,EAAAA,MAAAA,CAAAA;AAEzB,oBAAA,MAAMG,yBAAyBC,MAAOC,CAAAA,MAAM,CAAChB,WAAAA,CAAAA,CAAaiB,QAAQ,CAACL,IAAAA,CAAAA;AACnE,oBAAA,IAAI,CAACE,sBAAwB,EAAA;AAC3B,wBAAA,MAAM,IAAIjB,eAAgB,CAAA,CAAC,CAAC,EAAEe,IAAAA,CAAK,2BAA2B,CAAC,CAAA;AACjE;oBAEA,OAAOA,IAAAA;AACT;AACF,aAAA,CAAA;AAEAL,YAAAA,CAAAA,CAAEE,MAAM,CAAC,SAAA,CAAA;AACX;AACF,KAAA,CAAA;AACF,CAAA;;;;"}