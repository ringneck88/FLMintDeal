{"version":3,"file":"filters.mjs","sources":["../../../../../server/src/services/internals/types/filters.ts"],"sourcesContent":["import { inputObjectType } from 'nexus';\nimport type { Context } from '../../types';\n\n/**\n * Build a map of filters type for every GraphQL scalars\n * @return {Object<string, NexusInputTypeDef>}\n */\nconst buildScalarFilters = ({ strapi }: Context) => {\n  const { naming, mappers } = strapi.plugin('graphql').service('utils');\n  const { helpers } = strapi.plugin('graphql').service('internals');\n\n  return helpers.getEnabledScalars().reduce((acc: any, type: string) => {\n    const operators = mappers.graphqlScalarToOperators(type);\n    const typeName = naming.getScalarFilterInputTypeName(type);\n\n    if (!operators || operators.length === 0) {\n      return acc;\n    }\n\n    return {\n      ...acc,\n\n      [typeName]: inputObjectType({\n        name: typeName,\n\n        definition(t) {\n          for (const operator of operators) {\n            operator.add(t, type);\n          }\n        },\n      }),\n    };\n  }, {});\n};\n\nexport default (context: Context) => ({\n  scalars: buildScalarFilters(context),\n});\n"],"names":["buildScalarFilters","strapi","naming","mappers","plugin","service","helpers","getEnabledScalars","reduce","acc","type","operators","graphqlScalarToOperators","typeName","getScalarFilterInputTypeName","length","inputObjectType","name","definition","t","operator","add","context","scalars"],"mappings":";;AAGA;;;AAGC,IACD,MAAMA,kBAAAA,GAAqB,CAAC,EAAEC,MAAM,EAAW,GAAA;IAC7C,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAE,GAAGF,MAAAA,CAAOG,MAAM,CAAC,SAAWC,CAAAA,CAAAA,OAAO,CAAC,OAAA,CAAA;IAC7D,MAAM,EAAEC,OAAO,EAAE,GAAGL,OAAOG,MAAM,CAAC,SAAWC,CAAAA,CAAAA,OAAO,CAAC,WAAA,CAAA;AAErD,IAAA,OAAOC,QAAQC,iBAAiB,EAAA,CAAGC,MAAM,CAAC,CAACC,GAAUC,EAAAA,IAAAA,GAAAA;QACnD,MAAMC,SAAAA,GAAYR,OAAQS,CAAAA,wBAAwB,CAACF,IAAAA,CAAAA;QACnD,MAAMG,QAAAA,GAAWX,MAAOY,CAAAA,4BAA4B,CAACJ,IAAAA,CAAAA;AAErD,QAAA,IAAI,CAACC,SAAAA,IAAaA,SAAUI,CAAAA,MAAM,KAAK,CAAG,EAAA;YACxC,OAAON,GAAAA;AACT;QAEA,OAAO;AACL,YAAA,GAAGA,GAAG;YAEN,CAACI,QAAAA,GAAWG,eAAgB,CAAA;gBAC1BC,IAAMJ,EAAAA,QAAAA;AAENK,gBAAAA,UAAAA,CAAAA,CAAWC,CAAC,EAAA;oBACV,KAAK,MAAMC,YAAYT,SAAW,CAAA;wBAChCS,QAASC,CAAAA,GAAG,CAACF,CAAGT,EAAAA,IAAAA,CAAAA;AAClB;AACF;AACF,aAAA;AACF,SAAA;AACF,KAAA,EAAG,EAAC,CAAA;AACN,CAAA;AAEA,cAAe,CAAA,CAACY,OAAAA,IAAsB;AACpCC,QAAAA,OAAAA,EAASvB,kBAAmBsB,CAAAA,OAAAA;AAC9B,KAAA,CAAC;;;;"}