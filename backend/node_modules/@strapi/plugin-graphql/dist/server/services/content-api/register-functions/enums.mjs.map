{"version":3,"file":"enums.mjs","sources":["../../../../../server/src/services/content-api/register-functions/enums.ts"],"sourcesContent":["import type { Core, Struct } from '@strapi/types';\nimport type { TypeRegistry } from '../../type-registry';\n\nconst registerEnumsDefinition = (\n  contentType: Struct.Schema,\n  {\n    registry,\n    strapi,\n    builders,\n  }: {\n    registry: TypeRegistry;\n    strapi: Core.Strapi;\n    builders: any;\n  }\n) => {\n  const { service: getService } = strapi.plugin('graphql');\n\n  const {\n    naming,\n    attributes: { isEnumeration },\n  } = getService('utils');\n  const { KINDS } = getService('constants');\n\n  const { attributes } = contentType;\n\n  const enumAttributes = Object.keys(attributes).filter((attributeName) =>\n    isEnumeration(attributes[attributeName])\n  );\n\n  for (const attributeName of enumAttributes) {\n    const attribute = attributes[attributeName];\n\n    const enumName = naming.getEnumName(contentType, attributeName);\n    const enumDefinition = builders.buildEnumTypeDefinition(attribute, enumName);\n\n    registry.register(enumName, enumDefinition, {\n      kind: KINDS.enum,\n      contentType,\n      attributeName,\n      attribute,\n    });\n  }\n};\n\nexport { registerEnumsDefinition };\n"],"names":["registerEnumsDefinition","contentType","registry","strapi","builders","service","getService","plugin","naming","attributes","isEnumeration","KINDS","enumAttributes","Object","keys","filter","attributeName","attribute","enumName","getEnumName","enumDefinition","buildEnumTypeDefinition","register","kind","enum"],"mappings":"AAGMA,MAAAA,uBAAAA,GAA0B,CAC9BC,WACA,EAAA,EACEC,QAAQ,EACRC,MAAM,EACNC,QAAQ,EAKT,GAAA;AAED,IAAA,MAAM,EAAEC,OAASC,EAAAA,UAAU,EAAE,GAAGH,MAAAA,CAAOI,MAAM,CAAC,SAAA,CAAA;IAE9C,MAAM,EACJC,MAAM,EACNC,UAAAA,EAAY,EAAEC,aAAa,EAAE,EAC9B,GAAGJ,UAAW,CAAA,OAAA,CAAA;AACf,IAAA,MAAM,EAAEK,KAAK,EAAE,GAAGL,UAAW,CAAA,WAAA,CAAA;IAE7B,MAAM,EAAEG,UAAU,EAAE,GAAGR,WAAAA;AAEvB,IAAA,MAAMW,cAAiBC,GAAAA,MAAAA,CAAOC,IAAI,CAACL,UAAYM,CAAAA,CAAAA,MAAM,CAAC,CAACC,aACrDN,GAAAA,aAAAA,CAAcD,UAAU,CAACO,aAAc,CAAA,CAAA,CAAA;IAGzC,KAAK,MAAMA,iBAAiBJ,cAAgB,CAAA;QAC1C,MAAMK,SAAAA,GAAYR,UAAU,CAACO,aAAc,CAAA;AAE3C,QAAA,MAAME,QAAWV,GAAAA,MAAAA,CAAOW,WAAW,CAAClB,WAAae,EAAAA,aAAAA,CAAAA;AACjD,QAAA,MAAMI,cAAiBhB,GAAAA,QAAAA,CAASiB,uBAAuB,CAACJ,SAAWC,EAAAA,QAAAA,CAAAA;QAEnEhB,QAASoB,CAAAA,QAAQ,CAACJ,QAAAA,EAAUE,cAAgB,EAAA;AAC1CG,YAAAA,IAAAA,EAAMZ,MAAMa,IAAI;AAChBvB,YAAAA,WAAAA;AACAe,YAAAA,aAAAA;AACAC,YAAAA;AACF,SAAA,CAAA;AACF;AACF;;;;"}