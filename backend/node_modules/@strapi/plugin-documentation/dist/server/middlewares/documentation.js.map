{"version":3,"file":"documentation.js","sources":["../../../server/src/middlewares/documentation.ts"],"sourcesContent":["import path from 'path';\nimport koaStatic from 'koa-static';\nimport swaggerUi from 'swagger-ui-dist';\n\nimport type { Core } from '@strapi/types';\n\nexport const addDocumentMiddlewares = async ({ strapi }: { strapi: Core.Strapi }) => {\n  strapi.server.routes([\n    {\n      method: 'GET',\n      path: '/plugins/documentation/(.*)',\n      async handler(ctx, next) {\n        ctx.url = path.basename(ctx.url);\n\n        return koaStatic(swaggerUi.getAbsoluteFSPath(), {\n          maxage: 86400000,\n          defer: true,\n        })(ctx, next);\n      },\n      config: {\n        auth: false,\n      },\n    },\n  ]);\n};\n"],"names":["addDocumentMiddlewares","strapi","server","routes","method","path","handler","ctx","next","url","basename","koaStatic","swaggerUi","getAbsoluteFSPath","maxage","defer","config","auth"],"mappings":";;;;;;AAMaA,MAAAA,sBAAAA,GAAyB,OAAO,EAAEC,MAAM,EAA2B,GAAA;IAC9EA,MAAOC,CAAAA,MAAM,CAACC,MAAM,CAAC;AACnB,QAAA;YACEC,MAAQ,EAAA,KAAA;YACRC,IAAM,EAAA,6BAAA;YACN,MAAMC,OAAAA,CAAAA,CAAQC,GAAG,EAAEC,IAAI,EAAA;AACrBD,gBAAAA,GAAAA,CAAIE,GAAG,GAAGJ,IAAAA,CAAKK,QAAQ,CAACH,IAAIE,GAAG,CAAA;gBAE/B,OAAOE,SAAAA,CAAUC,SAAUC,CAAAA,iBAAiB,EAAI,EAAA;oBAC9CC,MAAQ,EAAA,QAAA;oBACRC,KAAO,EAAA;AACT,iBAAA,CAAA,CAAGR,GAAKC,EAAAA,IAAAA,CAAAA;AACV,aAAA;YACAQ,MAAQ,EAAA;gBACNC,IAAM,EAAA;AACR;AACF;AACD,KAAA,CAAA;AACH;;;;"}