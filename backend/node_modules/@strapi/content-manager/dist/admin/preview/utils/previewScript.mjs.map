{"version":3,"file":"previewScript.mjs","sources":["../../../../admin/src/preview/utils/previewScript.ts"],"sourcesContent":["// NOTE: This override is for the properties on _user's site_, it's not about Strapi Admin.\ndeclare global {\n  interface Window {}\n}\n\n/**\n * previewScript will be injected into the preview iframe after being stringified.\n * Therefore it CANNOT use any imports, or refer to any variables outside of its own scope.\n * It's why many functions are defined within previewScript, it's the only way to avoid going full spaghetti.\n * To get a better overview of everything previewScript does, go to the orchestration part at its end.\n */\nconst previewScript = (shouldRun = true) => {\n  const INTERNAL_EVENTS = {\n    DUMMY_EVENT: 'dummyEvent',\n  } as const;\n\n  /**\n   * Calling the function in no-run mode lets us retrieve the constants from other files and keep\n   * a single source of truth for them. It's the only way to do this because this script can't\n   * refer to any variables outside of its own scope, because it's stringified before it's run.\n   */\n  if (!shouldRun) {\n    return { INTERNAL_EVENTS };\n  }\n\n  // Live Preview logic will go here.\n  // eslint-disable-next-line no-console\n  console.log('Preview script running');\n};\n\nexport { previewScript };\n"],"names":["previewScript","shouldRun","INTERNAL_EVENTS","DUMMY_EVENT","console","log"],"mappings":"AAAA;AAKA;;;;;AAKC,IACKA,MAAAA,aAAAA,GAAgB,CAACC,SAAAA,GAAY,IAAI,GAAA;AACrC,IAAA,MAAMC,eAAkB,GAAA;QACtBC,WAAa,EAAA;AACf,KAAA;AAEA;;;;MAKA,IAAI,CAACF,SAAW,EAAA;QACd,OAAO;AAAEC,YAAAA;AAAgB,SAAA;AAC3B;;;AAIAE,IAAAA,OAAAA,CAAQC,GAAG,CAAC,wBAAA,CAAA;AACd;;;;"}